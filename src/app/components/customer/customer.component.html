<p-toast></p-toast>
<p-toolbar styleClass="p-mb-4">
  <ng-template pTemplate="left">
    <button pButton pRipple label="Nuevo" icon="pi pi-plus" class="p-button-success p-mr-2" (click)="openNew()"></button>
  </ng-template>
</p-toolbar>

<p-table [value]="customers">
  <ng-template pTemplate="header">
    <tr>
      <th>Nombre</th>
      <th>CURP</th>
      <th>Fecha de nacimiento</th>
      <th>Sexo</th>
      <th ></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-customer>
    <tr>
      <td> {{customer.nombre}} </td>
      <td> {{customer.curp}} </td>
      <td> {{ customer.fechaNac | date:'dd/MM/YYYY' }} </td>
      <td> {{customer.sexo}} </td>
      <td>
        <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2" (click)="editCustomer(customer)"></button>
        <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteCustomer(customer)"></button>
      </td>

    </tr>
  </ng-template>
</p-table>

<p-progressSpinner *ngIf="showLoading"></p-progressSpinner>

<p-dialog [(visible)]="customerDialog" [style]="{width: '450px'}" header="Registro"
[modal]="true" styleClass="p-fluid" [baseZIndex]="10000" [draggable]="false" [resizable]="true" >

  <ng-template pTemplate="content" >

    <div class="p-field">
      <label for="name">Nombre</label>
      <input type="text" pInputText id="name" [(ngModel)]="customer.nombre" required autofocus />
      <small class="p-error" *ngIf="submitted && !customer.nombre">Required</small>
    </div>

    <div class="p-field">
      <label for="description">CURP</label>
      <input type="text" pInputText id="curp" [(ngModel)]="customer.curp" required
        pattern="([A-Z]{4}([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM](AS|BC|BS|CC|CL|CM|CS|CH|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[A-Z]{3}[0-9A-Z]\d)" />
      <small class="p-error" *ngIf="submitted && !customer.curp">Required</small>
    </div>

    <div class="p-field" >
      <label for="description">Fecha nacimiento</label>
      <p-inputMask mask="99/99/9999" [(ngModel)]="customer.fechanacimiento" placeholder="99/99/9999" slotChar="dd/mm/yyyy"></p-inputMask>
      <!--p-calendar [(ngModel)]="customer.fechaNac" [style]="{width: '250px'}" yearRange="1980:2021" inputId="navigators"></p-calendar-->
      <small class="p-error" *ngIf="submitted && !customer.fechanacimiento">Required</small>
    </div>

    <div >
      <label for="description">Sexo</label>
      <br>
      <div class="p-field-radiobutton">
        <p-radioButton name="sexo" value="M" [(ngModel)]="customer.sexo" inputId="sexo1"></p-radioButton>
        <label for="sexo1">Hombre</label>
      </div>
      <div class="p-field-radiobutton">
        <p-radioButton name="sexo" value="F" [(ngModel)]="customer.sexo" inputId="sexo2"></p-radioButton>
        <label for="sexo2">Mujer</label>
      </div>
      <small class="p-error" *ngIf="submitted && !customer.sexo">Required</small>
    </div>

  </ng-template>

  <ng-template pTemplate="footer">
    <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
    <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="saveOrUpdateCustomer()"></button>
  </ng-template>

</p-dialog>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
